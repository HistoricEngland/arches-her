{% extends "views/report-templates/default.htm" %} 
{% load i18n %} 
{% block report %}

{% block body %}
<!-- Geometry/Map -->
<div class="aher-report-section">
    <h2 class="aher-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.coordinates)}" class="fa fa-angle-double-right toggle"></i> {% trans "Geospatial Coordinates" %}</h2>
    <a class="aher-report-a" data-bind="{if: cards.locationGeometry && !coordinateData, click: function(){addNewTile(cards.locationGeometry)}}">
        <i class="fa fa-mail-reply"></i> {% trans "Add Geometry" %}
    </a>

    <!-- Collapsible content -->
    <div data-bind="visible: visible.coordinates" class="aher-report-collapsible-container pad-lft">

        <div class="aher-report-subsection">
            <h3><i data-bind="click: function() {toggleVisibility(visible.locality)}" class="fa fa-angle-double-right toggle"></i> {% trans "Geometry " %}  <span data-bind="visible: observableValueSet([geometryShape])">(Shape type: <span data-bind="text: geometryShape"></span>)</span></h3>
            <a class="aher-report-a" data-bind="{if: cards.locationGeometry, click: function(){addNewTile(cards.locationGeometry)}}"><i class="fa fa-mail-reply"></i> {% trans "Edit location" %}</a>
            <div data-bind="visible: visible.locality">
                <div data-bind="component: {
                    name: 'views/components/reports/scenes/map',
                    params: {
                        geojson: coordinateData
                    }}">
                </div>
            </div>
        </div>

        <!-- Geometry Metadata -->
        <div class="aher-report-subsection">
            <h3><i data-bind="click: function() {toggleVisibility(visible.geometryMetadata)}" class="fa fa-angle-double-right toggle"></i> {% trans "Geometry Metadata" %}</h3>
            
            <!-- Collapsible content -->
            <div data-bind="visible: visible.geometryMetadata" class="aher-report-collapsible-container">
                <div class="aher-report-subsection-container multi-cards no-flex">

                    <!-- Record Authorization/Compilation/Update -->
                    <div class="aher-report-subsection-firstchild">
                        <h5>Record Edit History</h5>
                        
                        <!-- ko ifnot: recordEditExists -->
                        <div class="aher-nodata-note">No authorization record for this resource</div>
                        <!-- /ko -->

                        <!-- ko if: recordEditExists -->   
                        <div class="firstchild-container" data-bind="{with: geometryMetadata}">
                            <div class="aher-report-subsection-item flex">
                                <div class="aher-block-attributes actor-name">
                                    <h6 class="aher-block-key compressed">Authorizer: </h6>
                                    <div data-bind="text: authorizerName" class="aher-block-value"></div>
                                </div>
                                <div class="aher-block-attributes timespan">
                                    <h6 class="aher-block-key compressed">Authorization Date: </h6>
                                    <div data-bind="text: authorizationDate" class="aher-block-value"></div>
                                </div>
                                <div class="aher-block-attributes">
                                    <h6 class="aher-block-key compressed">Type of Authorization: </h6>
                                    <div data-bind="text: typeOfAuthorization" class="aher-block-value"></div>
                                </div>
                            </div>
                            <div class="aher-report-subsection-item flex">
                                <div class="aher-block-attributes actor-name">
                                    <h6 class="aher-block-key compressed">Compiler: </h6>
                                    <div data-bind="text: compilerName" class="aher-block-value"></div>
                                </div>
                                <div class="aher-block-attributes timespan">
                                    <h6 class="aher-block-key compressed">Compile Date: </h6>
                                    <div data-bind="text: compileDate" class="aher-block-value"></div>
                                </div>
                            </div>
                            <div class="aher-report-subsection-item flex">
                                <div class="aher-block-attributes actor-name">
                                    <h6 class="aher-block-key compressed">Updater: </h6>
                                    <div data-bind="text: updateDate"  class="aher-block-value"></div>
                                </div>
                                <div class="aher-block-attributes timespan">
                                    <h6 class="aher-block-key compressed">Update Date: </h6>
                                    <div data-bind="text: updaterName"  class="aher-block-value"></div>
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->   
                    </div>

                    <!-- Geometry Sources/Scale -->
                    <div class="aher-report-subsection-firstchild">
                        <h5>Record Sources/Scale</h5>

                        <!-- ko ifnot: geometryScaleExists -->
                        <div class="aher-nodata-note">No record sources/scale for this resource</div>
                        <!-- /ko -->   

                        <!-- ko if: geometryScaleExists -->
                        <div class="firstchild-container">
                            <div class="aher-report-subsection-item flex column-order pad-btm" data-bind="{with: geometryScale}">
                                <div class="aher-block-attributes">
                                    <h6 class="aher-block-key compressed">Coordinate System: </h6>
                                    <div data-bind="text: coordinateSystem" class="aher-block-value"></div>
                                </div>
                                <div class="aher-block-attributes">
                                    <h6 class="aher-block-key compressed">Basemap: </h6>
                                    <div data-bind="text: basemap" class="aher-block-value"></div>
                                </div>
                                <div class="aher-block-attributes">
                                    <h6 class="aher-block-key compressed">Capture Scale: </h6>
                                    <div data-bind="text: captureScale" class="aher-block-value">--</div>
                                </div>
                                <div class="aher-block-attributes">
                                    <h6 class="aher-block-key compressed">Accuracy: </h6>
                                    <div data-bind="text: accuracy" class="aher-block-value"></div>
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->   
                    </div>

                    <!-- Record Description -->
                    <div class="aher-report-subsection-firstchild">
                        <h5>Description</h5>
                        <a class="aher-report-a"><i class="fa fa-mail-reply"></i> {% trans "Description" %}</a>
                        
                        <!-- ko if: !observableValueSet([geometryNotes]) || geometryNotes() == "" -->
                        <div class="aher-nodata-note">No description record for this resource</div>
                        <!-- /ko -->   

                        <!-- ko if: observableValueSet([geometryNotes]) -->
                        <div class="firstchild-container pad-btm">
                            <div class="aher-report-subsection-item">
                                <div class="aher-block-attributes" style="margin-top: 5px;">
                                    <h6 class="aher-block-key compressed">Metadata Description: </h6>
                                    <div data-bind="text: geometryNotes" class="aher-block-value"></div>
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->   
                    </div>
                </div>  
            </div>
        </div>
    </div>
</div>

<!-- Area Assignments -->
<div class="aher-report-section">
    <h2 class="aher-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.areaAssignment)}" class="fa fa-angle-double-right toggle"></i> {% trans "Area Assignment" %}</h2>
    <a class="aher-report-a" data-bind="{if: cards.areaAssignment, click: function(){addNewTile(cards.areaAssignment)}}"><i class="fa fa-mail-reply"></i> <span data-bind="if: areaAssignment().length">{% trans "Edit Area Assignment" %}</span><span data-bind="ifnot: areaAssignment().length">{% trans "Add Area Assignment" %}</span></a>

    <!-- Collapsible content -->
    <div data-bind="visible: visible.areaAssignment" class="aher-report-collapsible-container pad-lft">

        <!-- ko ifnot: areaAssignment().length -->
        <div class="aher-nodata-note">No area assignments for this resource</div>
        <!-- /ko -->

        <!-- ko if: areaAssignment().length -->
        <div class="aher-report-subsection">
            
            <div class="firstchild-container">
                <!-- Area Table -->
                <div class="aher-table pad-btm">
                    <table class="table table-striped" cellspacing="0" width="100%">
                        <thead>
                            <tr class="aher-table-header">
                                <th>{% trans "Status" %}</th>
                                <th>{% trans "Ownership" %}</th>
                                <th>{% trans "Start Date" %}</th>
                                <th>{% trans "End Date" %}</th>
                                <th>{% trans "SHINE Form" %}</th>
                                <th class="none">{% trans "SHINE Significance" %}</th>
                                <th class="none">{% trans "Reference" %}</th>
                                <th class="aher-table-control all"></th>
                            </tr>
                        </thead>
                        <tbody data-bind="dataTablesForEach:{ data: areaAssignment, dataTableOptions: areaAssignmentsTableConfig}" >
                            <tr>
                                <td data-bind="text: status"></td>
                                <td data-bind="text: ownership"></td>
                                <td data-bind="text: startDate"></td>
                                <td data-bind="text: endDate"></td>
                                <td data-bind="text: shineForm"></td>
                                <td data-bind="text: shineSignificance"></td>
                                <td data-bind="text: reference"></td>
                                <td class="aher-table-control">
                                    <div data-bind="if: $parent.cards.areaAssignment">
                                        <a data-bind="click: function() {$parent.editTile(tileid, $parent.cards.areaAssignment)}">
                                            <i class="fa fa-mail-reply"></i>
                                        </a>
                                        <a data-bind="click:  function() {$parent.deleteTile(tileid, $parent.cards.areaAssignment)}">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- /ko -->
    </div>
</div>

<!-- Land Use Classification -->
<div class="aher-report-section">
    <h2 class="aher-report-section-title"><i data-bind="click: function() {toggleVisibility(visible.landUse)}" class="fa fa-angle-double-right toggle"></i> {% trans "Land Use Classification" %}</h2>
    <a class="aher-report-a" data-bind="{if: cards.landUse, event:{ mousedown:function(d, e){addNewTile(cards.landUse, e)}}}"><i class="fa fa-mail-reply"></i> <span data-bind="if: landUseClassification().length">{% trans "Edit Classification" %}</span><span data-bind="ifnot: landUseClassification().length">{% trans "Add Classification" %}</span></a>

    <!-- Collapsible content -->
    <div data-bind="visible: visible.landUse" class="aher-report-collapsible-container pad-lft">

        <!-- ko ifnot: landUseClassification().length -->
        <div class="aher-nodata-note">No land use classes for this resource</div>
        <!-- /ko -->

        <!-- ko if: landUseClassification().length -->
        <div class="aher-report-subsection">
            
            <div class="firstchild-container">
                <!-- Land Use Table -->
                <div class="aher-table pad-btm">
                    <table class="table table-striped" cellspacing="0" width="100%">
                        <thead>
                            <tr class="aher-table-header">
                                <th>{% trans "Land Use" %}</th>
                                <th>{% trans "Start Date" %}</th>
                                <th>{% trans "End Date" %}</th>
                                <th>{% trans "Geology" %}</th>
                                <th class="none">{% trans "Sub-soil" %}</th>
                                <th class="none">{% trans "Reference" %}</th>
                                <th class="aher-table-control all"></th>
                            </tr>
                        </thead>
                        <tbody data-bind="dataTablesForEach: {data: landUseClassification, dataTableOptions: landUseTableConfig}">
                            <tr>
                                <td data-bind="text: classification"></td>
                                <td data-bind="text: startDate"></td>
                                <td data-bind="text: endDate"></td>
                                <td data-bind="text: geology"></td>
                                <td data-bind="text: subSoil"></td>
                                <td data-bind="text: reference"></td>
                                <td class="aher-table-control">
                                    <div data-bind="if: $parent.cards.landUse">
                                        <a data-bind="click: function() {$parent.editTile(tileid, $parent.cards.landUse)}">
                                            <i class="fa fa-mail-reply"></i>
                                        </a>
                                        <a data-bind="click:  function() {$parent.deleteTile(tileid, $parent.cards.landUse)}">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- /ko -->
    </div>
</div>
{% endblock body %}
{% endblock report %}
{% block summary %}

<div class="model-summary-report">
Do not use - yet.
</div>

{% endblock summary %}